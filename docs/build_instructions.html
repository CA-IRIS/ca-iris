<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<meta name="Author" content="Douglas Lau"/>
	<link href="iris_doc.css" rel="stylesheet" type="text/css"/>
	<title>Building Mn/DOT IRIS RPM package</title>
</head>

<body>
<div id="stamp">22 May 2009</div>
<h1>Instructions for building the IRIS RPM package</h1>
<ol>
	<li>
		Install <a href="http://fedoraproject.org">Fedora 10</a> onto
		a development machine.
	</li>
	<li>
		Install needed development packages.
		This is the only step which should be done as the root user.
<pre>
yum install java-1.6.0-openjdk-devel ant mercurial rpm-build gcc
</pre>
	</li>
	<li>
		Clone the iris mercurial repository (in home directory):
<pre>
hg clone http://iris.dot.state.mn.us/hg/index.cgi/iris
</pre>
	</li>
	<li>
		Create lib/ directory (in repository root):
<pre>
mkdir lib/
</pre>
	</li>
	<li>
		Download the <a href="http://java.sun.com/products/javamail/downloads/index.html">JavaMail API</a> from Sun.
	</li>
	<li>
		Unzip the JavaMail archive and locate the mail.jar file.
		Copy the mail.jar file to the lib/ directory in the iris
		repository.
	</li>
	<li>
		Copy iris-build.properties from etc/ to lib/.
	</li>
	<li>
		Edit lib/iris-build.properties file as necessary for
		your organization.
	</li>
	<li>
		Create the key for signing jar packages.  This is required
		for Java Web Start, which is used by the IRIS client.
		The key should go into your default keystore (~/.keystore).
<pre>
keytool -genkeypair -alias signing-key
</pre>
	</li>
	<li>
		Put the following lines into your ~/.ant.properties file.
<pre>
debug=off
sign.store=${user.home}/.keystore
sign.store.pass=password
sign.alias=signing-key
sign.alias.pass=signing-password
hgbase.url=http://iris.dot.state.mn.us/hg/index/cgi/
video.backend.host=video.example.com
video.backend.port=80
video.repeater.host=repeater.example.com
video.repeater.port=80
shapes.maps.dir=/path/to/shapefile/maps
</pre>		
	</li>
	<li>
		Now it's time to build the iris RPM file.
<pre>
ant rpm
</pre>
	</li>
	<li>
		Locate the RPM file in build/rpm/RPMS/i386/.
	</li>
</ol>

</body>
</html>
