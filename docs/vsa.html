<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<meta name="Author" content="Douglas Lau"/>
	<link href="iris_doc.css" rel="stylesheet" type="text/css"/>
	<title>Variable Speed Advisory Calculation</title>
</head>

<body>
<p id="stamp">26 May 2010</p>
<h2>Variable Speed Advisory Calculation</h2>
<div class="right">
	<img src="uniform_acc.svg" width="512" height="512" />
	<div class="label">Uniform Acceleration</div>
</div>
<p>
	The goal is to promote a safe, <b>uniform deceleration</b> for vehicles
	approaching congestion.
	The standard equation for uniform acceleration is used to determine
	when variable speed advisories must be deployed.
</p>
<dl>
	<dt>Deceleration Threshold</dt>
	<dd><p>
		This is a uniform rate of deceleration <b>a<sub>p</sub></b>
		which is assumed to be safe for all vehicles.
		It is based on the pavement conditions, which are measured
		using a precipitation sensor.
		There are seperate thresholds for dry, light rain, moderate
		rain, heavy rain, and ice.
		The units are in mph/s, and negative values indicate
		deceleration instead of acceleration.
	</p></dd>
	<dt>Station Parameters</dt>
	<dd><ul>
		<li>Speed Limit (L) miles per hour</li>
		<li>Mile Point (M) miles from upstream end of corridor</li>
	</ul></dd>
	<dt>Station Sample Data</dt>
	<dd>
	    <ul>
		<li>Speed (U) miles per hour (average of all lanes)</li>
	    </ul>
	    The average of the most recent 30-second samples is used.
	    The number of samples depends on the lowest sample speed.
	    <table>
	        <tr>
	    	    <th>Lowest Speed</th>
	            <th>Sample Count</th>
	            <th>Sample period</th>
	        </tr>
	        <tr>
	            <td>40+ mph</td>
	            <td>2 samples</td>
	            <td>1 minute</td>
	        </tr>
	        <tr>
	            <td>25-40 mph</td>
	            <td>4 samples</td>
	            <td>2 minutes</td>
	        </tr>
	        <tr>
	            <td>20-25 mph</td>
	            <td>6 samples</td>
	            <td>3 minutes</td>
	        </tr>
	        <tr>
	            <td>15-20 mph</td>
	            <td>8 samples</td>
	            <td>4 minutes</td>
	        </tr>
	        <tr>
	            <td>0-15 mph</td>
	            <td>10 samples</td>
	            <td>5 minutes</td>
	        </tr>
	    </table>
	    <br/>
	</dd>
	<dt>Station Results</dt>
	<dd><ul>
		<li>Speed Advisory (A) miles per hour</li>
	</ul></dd>
</dl>
<h3>Corridor Algorithm</h3>
<ol>
	<li>
		Sort stations in corridor from upstream to downstream.
		The stations are <b>S<sub>0</sub>…S<sub>n</sub></b>.
	</li>
	<li>
		Iterate through all mainline stations.
		For each station <b>S<sub>i</sub></b> with valid speed data,
		perform the station algorithm below.
	</li>
	<li>
		For all stations with invalid speed data, set the speed
		advisory using a linear interpolation from the next upstream
		and downstream valid stations.
	</li>
</ol>
<h3>Station Algorithm</h3>
<ol>
	<li>
		Set initial control range <b><sub>r</sub></b> to 1 upstream
		station.
	</li>
	<li>
		Set speed advisory <b>A<sub>i</sub></b> equal to the speed limit
		<b>L<sub>i</sub></b>.
	</li>
	<li>
		Calculate uniform acceleration in control range:
		<div>
		<span class="middle">a = </span>
		<span class="inblock">U<sub>i</sub>² - U<sub>i-r</sub>²<br/>
		<span class="over">2 * (M<sub>i</sub> - M<sub>i-r</sub>) * 3600
		</span></span>
		</div>
		The units for <b>a</b> are mph/s.
		The result will be positive for acceleration, and negative for
		deceleration.
	</li>
	<li>
		For each station <b>S<sub>j</sub></b>, from
		<b>S<sub>i-r</sub></b> to <b>S<sub>i</sub></b> (non-inclusive),
		reduce the speed advisory <b>A<sub>j</sub></b>.
		<ul>
		    <li>
		    	A = √<span class="over">
		    	U<sub>i</sub>² + 2 a
		    	(M<sub>i</sub> - M<sub>j</sub>)</span>
		    </li>
		    <li>
		        Limit A to range of
		        [U<sub>j</sub> - 15, A<sub>j</sub>]
		    </li>
		    <li>
		    	Set A<sub>j</sub> = A
		    </li>
		</ul>
	</li>
	<li>
		Check that <b>a</b> is greater than <b>a<sub>p</sub></b>
		(deceleration threshold for current pavement condition).
		If not, stop processing.
	</li>
	<li>
		Increment control range <b><sub>r</sub></b> by 1 station.
	</li>
	<li>
		If <b><sub>i-r</sub></b> ≥ 0, continue from step 3.
		Otherwise, stop processing.
	</li>
</ol>

<h2>Applying Speed Advisory to ILCS</h2>
<p>
	For each LCS array with a deployed VSA action plan, determine whether
	the VSA indication should be displayed or not.
</p>
<ol>
	<li>
		Find the stations immediately upstream and downstream of the
		LCS array.
	</li>
	<li>
		Calculate the speed advisory at the location of the LCS array.
		If the LCS array is within 1000 feet (configurable) of either
		station, use the speed advisory at that station.
		If not, and the downstream advisory is less than the upstream
		advisory, use linear linterpolation between the two.
		Otherwise, use the downstream speed.
	</li>
	<li>
		Quantize the speed advisory to 5 mph granularity.
		This is done by rounding up to the next higher 5 mph.
	</li>
	<li>
		If the advisory is not less than the speed limit at both
		upstream and downstream stations, do not display a VSA
		indication.
	</li>
	<li>
		Limit speed advisory to no less than 5 mph below previous 30
		second speed advisory.
	</li>
	<li>
		Limit speed advisory to no less than configurable minimum
		speed advisory (30 mph).
	</li>
</ol>
</body>
</html>
