<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<meta name="Author" content="Douglas Lau"/>
	<link href="iris_doc.css" rel="stylesheet" type="text/css"/>
	<title>Variable Speed Advisory Calculation</title>
</head>

<body>
<p id="stamp">2 June 2010</p>
<h2>Variable Speed Advisory Calculation</h2>
<div class="right">
	<img src="uniform_acc.svg" width="512" height="512" />
	<div class="label">Uniform Acceleration</div>
</div>
<p>
    The goal is to promote a safe, <b>uniform deceleration</b> for vehicles
    approaching congestion.
    The standard equation for uniform acceleration is used to determine when
    variable speed advisories must be deployed.
</p>
<dl>
    <dt>Deceleration Threshold</dt>
    <dd>
	<p>
	    A <i>bottleneck</i> is activated when the uniform rate of
	    deceleration is found to be unsafe.
	    There are two thresholds for determining a bottleneck.
	    They are the start <b>a<sub>s</sub></b> and stop
	    <b>a<sub>p</sub></b> thresholds.
	    The thresholds are based on the pavement conditions, measured using
	    a precipitation sensor.
	    There are seperate thresholds for dry, light rain, moderate rain,
	    heavy rain, and ice.
	    The units are in mi/hr², and negative values indicate deceleration
	    instead of acceleration.
	</p>
	<table>
	    <tr>
		<th>Precipitation</th>
		<th>Start <b>a<sub>s</sub></b></th>
		<th>Stop <b>a<sub>p</sub></b></th>
	    </tr>
	    <tr>
		<td>Dry</td>
		<td>-1500</td>
		<td>-1000</td>
	    </tr>
	    <tr>
		<td>Light</td>
		<td>-1200</td>
		<td>-800</td>
	    </tr>
	    <tr>
		<td>Moderate</td>
		<td>-1050</td>
		<td>-700</td>
	    </tr>
	    <tr>
		<td>Heavy</td>
		<td>-900</td>
		<td>-600</td>
	    </tr>
	    <tr>
		<td>Icy</td>
		<td>-750</td>
		<td>-500</td>
	    </tr>
	</table>
    </dd>
	<dt>Station Parameters</dt>
	<dd><ul>
		<li>Speed Limit (L) miles per hour</li>
		<li>Mile Point (M) miles from upstream end of corridor</li>
	</ul></dd>
	<dt>Station Sample Data</dt>
	<dd>
	    <ul>
		<li>Speed (U) miles per hour (average of all lanes)</li>
	    </ul>
	    The average of the most recent 30-second samples is used.
	    The number of samples depends on the lowest sample speed.
	    <table>
	        <tr>
	    	    <th>Lowest Speed</th>
	            <th>Sample Count</th>
	            <th>Sample period</th>
	        </tr>
	        <tr>
	            <td>40+ mph</td>
	            <td>2 samples</td>
	            <td>1 minute</td>
	        </tr>
	        <tr>
	            <td>25-40 mph</td>
	            <td>4 samples</td>
	            <td>2 minutes</td>
	        </tr>
	        <tr>
	            <td>20-25 mph</td>
	            <td>6 samples</td>
	            <td>3 minutes</td>
	        </tr>
	        <tr>
	            <td>15-20 mph</td>
	            <td>8 samples</td>
	            <td>4 minutes</td>
	        </tr>
	        <tr>
	            <td>0-15 mph</td>
	            <td>10 samples</td>
	            <td>5 minutes</td>
	        </tr>
	    </table>
	</dd>
</dl>
<h3>Corridor Algorithm</h3>
<ol>
    <li>
	Sort stations in corridor from upstream to downstream.
	The stations are <b>S<sub>0</sub>…S<sub>n</sub></b>.
    </li>
    <li>
	For each station <b>S<sub>1</sub>…S<sub>n</sub></b>, calculate the
	bottleneck interval count <b>B<sub>i</sub></b>.
    </li>
    <ul>
        <li>
	    If <b>U<sub>i</sub></b> or <b>U<sub>i-1</sub></b> are invalid,
	    <b>B<sub>i</sub></b> = 0.
	</li>
	<li>
	    If <b>U<sub>i</sub></b> + 10 &gt; <b>L<sub>i</sub></b>,
	    <b>B<sub>i</sub></b> = 0.
	</li>
	<li>
	    Calculate uniform acceleration (mi/hr²) approaching station:
	    <div>
	    <span class="middle">a<sub>i</sub> = </span>
	    <span class="inblock">U<sub>i</sub>² - U<sub>i-1</sub>²<br/>
	    <span class="over">2 (M<sub>i</sub> - M<sub>i-1</sub>)
	    </span></span>
	    </div>
	</li>
	<li>
	    If <b>B<sub>i</sub></b> &lt; 3 then if <b>a<sub>i</sub></b> &gt;
	    <b>a<sub>s</sub></b>, <b>B<sub>i</sub></b> = 0.
	</li>
	<li>
	    Else if <b>a<sub>i</sub></b> &gt; <b>a<sub>p</sub></b>,
	    <b>B<sub>i</sub></b> = 0.
	</li>
	<li>
	    Otherwise, increment <b>B<sub>i</sub></b> by 1 interval.
	</li>
    </ul>
    <li>
	For each station <b>S<sub>1</sub>…S<sub>n</sub></b>, calculate the
	bottleneck flag <b>b<sub>i</sub></b>.
    </li>
    <ul>
	<li>
	    If <b>B<sub>i</sub></b> &lt; 3, clear <b>b<sub>i</sub></b> flag;
	    otherwise:
	</li>
	<ul>
	    <li>
		If <b>a<sub>i</sub></b> &gt; <b>a<sub>i-1</sub></b>, set
		<b>b<sub>i-1</sub></b> flag and clear <b>b<sub>i</sub></b> flag.
	    </li>
	    <li>
		Else set <b>b<sub>i</sub></b> flag and clear
		<b>b<sub>i-1</sub></b> flag.
	    </li>
	</ul>
    </ul>
</ol>

<h3>Assigning Speed Advisory to ILCS</h3>
<p>
	For each LCS array with a deployed VSA action plan, determine whether
	the VSA indication should be displayed or not.
</p>
<ol>
    <li>
	Find any bottlenecks which are in range of ILCS.
    </li>
    <li>
    	Set L<sub>lcs</sub> to minimum of speed limits at stations immediately
    	upstream and downstream of the ILCS.
    </li>
    <li>
    	Set U<sub>lcs</sub> to minimum of speeds at stations immediately
    	upstream and downstream of the ILCS.
    </li>
    <li>
    	Set U<sub>min</sub> to maximum of:
    	<ul>
    		<li>U<sub>lcs</sub> - 10 mph</li>
    		<li>previous interval A<sub>lcs</sub> - 5 mph</li>
    		<li>30 mph (configurable)</li>
    	</ul>
    </li>
    <li>
    	A<sub>lcs</sub> = √<span class="over">
    	U<sub>i</sub>² + 2 a<sub>p</sub>
    	(M<sub>i</sub> - M<sub>lcs</sub>)</span>
    </li>
    <li>
	If the LCS array is within 1000 feet (configurable) downstream of
	bottleneck, set A<sub>lcs</sub> = U<sub>i</sub>.
    </li>
    <li>
	If A<sub>lcs</sub> &lt; U<sub>min</sub>, set A<sub>lcs</sub> =
	U<sub>min</sub>.
    </li>
    <li>
	Quantize the speed advisory to 5 mph granularity.
	This is done by rounding up to the next higher 5 mph.
    </li>
    <li>
	If A<sub>lcs</sub> &lt; L<sub>lcs</sub> display VSA indication.
    </li>
</ol>
</body>
</html>
