<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" name="Author" content="Douglas Lau"/>
	<link href="iris_doc.css" rel="stylesheet" type="text/css"/>
	<title>IRIS Administrator Guide</title>
	<script type="text/javascript" src="admin_guide.js"></script>
</head>

<body>
<div class="sidebar">
<h1 class="contents">Contents</h1>
<h2 class="contents"><a id="overview_link" href="#overview">Overview</a></h2>
<h2 class="contents"><a id="installation_link" href="#installation">Installation</a></h2>
<h2 class="contents"><a id="basic_setup_link" href="#basic_setup">Basic Setup</a></h2>
<h2 class="contents"><a id="devices_link" href="#devices">Devices</a></h2>
<h2 class="contents"><a id="features_link" href="#features">Features</a></h2>
<h2 class="contents"><a id="troubleshooting_link" href="#troubleshooting">Troubleshooting</a></h2>
<h2 class="contents"><a id="maintenance_link" href="#maintenance">Maintenance</a></h2>
<h2 class="contents"><a id="development_link" href="#development">Development</a></h2>
</div>

<div class="mainbar">
<div id="stamp">15 May 2012</div>
<h1>IRIS Administrator Guide</h1>

<h2 id="overview">Overview
<span class="show">[<span id="overview_show">show</span><span id="overview_hide">hide</span>]</span></h2>
<div id="overview_div">
<p>
	IRIS is an <a href="http://www.opensource.org/docs/osd">open source</a>
	advanced traffic management system.
	It provides an integrated platform for transportation agencies to
	manage traffic monitoring and control devices.
	The software is written in <a href="http://www.java.com">Java</a> and
	licensed for anyone to use under the
	<a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.html">GPL</a>.
	IRIS stands for Intelligent Roadway Information System.
</p>

<svg class="right" xmlns="http://www.w3.org/2000/svg" version="1.1"
     width="640" height="480">
  <title>System Architecture</title>
  <defs>
    <marker id="Arrow1Mend" orient="auto" style="overflow:visible">
      <path d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
            transform="matrix(-0.4,0,0,-0.4,-4,0)"
            style="stroke:#000;stroke-width:1pt;marker-start:none"/>
    </marker>
  </defs>
  <g style="font-size:20px;font-family:Liberation Sans">
    <text style="font-size:28px">
      <tspan x="384" y="64">IRIS System</tspan>
      <tspan x="384" y="94">Architecture</tspan>
    </text>
    <g transform="translate(112,24)">
      <g style="fill:#c4f9ff;stroke:#000;stroke-width:2">
        <g style="opacity:0.5">
          <rect x="16" y="16" width="200" height="88" ry="8"
                style="opacity:0.5"/>
          <rect x="8" y="8" width="200" height="88" ry="8"/>
        </g>
        <rect x="0" y="0" width="200" height="88" ry="8"/>
      </g>
      <text>
        <tspan x="48" y="48">IRIS Clients</tspan>
      </text>
    </g>
    <g transform="translate(16,176)">
      <rect x="0" y="0" width="176" height="104" ry="8"
        style="fill:#ffe6c4;stroke:#000;stroke-width:2"/>
      <text>
        <tspan x="16" y="40">Apache Server</tspan>
        <tspan x="24" y="60">- Client JARs</tspan>
        <tspan x="24" y="80">- Map Tiles</tspan>
      </text>
    </g>
    <g transform="translate(232,176)">
      <rect x="0" y="0" width="192" height="120" ry="8"
            style="fill:#e2c4ff;stroke:#000;stroke-width:2"/>
      <text>
        <tspan x="40" y="60">IRIS Server</tspan>
      </text>
    </g>
    <g transform="translate(464,208)">
      <rect x="0" y="0" width="160" height="88" ry="8"
        style="fill:#d0ffc4;stroke:#000;stroke-width:2"/>
      <text>
        <tspan x="16" y="40">Authentication</tspan>
        <tspan x="16" y="60">Server (LDAP)</tspan>
      </text>
    </g>
    <g transform="translate(96,360)">
      <g style="fill:#f6ffc4;stroke:#000;stroke-width:2">
        <g style="opacity:0.5">
          <rect x="16" y="16" width="208" height="88" ry="8"
                style="opacity:0.5"/>
          <rect x="8" y="8" width="208" height="88" ry="8"/>
        </g>
        <rect x="0" y="0" width="208" height="88" ry="8"/>
      </g>
      <text>
        <tspan x="16" y="40">Traffic Monitoring</tspan>
        <tspan x="16" y="60">and Control Devices</tspan>
      </text>
    </g>
    <g transform="translate(368,360)">
      <rect x="0" y="0" width="152" height="88" ry="8"
        style="fill:#c4d1ff;stroke:#000;stroke-width:2" />
      <text>
        <tspan x="16" y="40">Database</tspan>
        <tspan x="16" y="60">(PostgreSQL)</tspan>
      </text>
    </g>
    <g style="stroke:#000;stroke-width:2;marker-end:url(#Arrow1Mend)">
      <path d="m 176,112 -32,64"/>
      <path d="m 256,112 32,64"/>
      <path d="m 424,240 40,8"/>
      <path d="m 272,296 -32,64"/>
      <path d="m 368,296 32,64"/>
    </g>
  </g>
</svg>

<p>
	The software has a client/server architecture.
	The server handles communication with all traffic control devices.
	Configuration data is stored in a PostgreSQL database.
	The client software is distributed by an Apache web server, using
	Java Web Start.
	All communication between the server and clients is encrypted using
	SSL.
	The server passes authentication requests off to an external LDAP
	server, allowing IRIS to integrate into an existing authentication
	system.
	The client presents an intuitive map-based user interface to system
	operators.
</p>

<h3>Devices</h3>
<p>
	IRIS is able to manage several different types of traffic monitoring and
	control devices.
	These include:
</p>
<ul>
	<li>DMS (dynamic message signs) or CMS</li>
	<li>Ramp meters</li>
	<li>VDS (vehicle detection sensors)</li>
	<li>LCS (lane-use control signals)</li>
	<li>CCTV cameras (pan/tilt/zoom)</li>
	<li>Video switchers</li>
	<li>In-road lighting (dynamic striping)</li>
	<li>Warning Beacons</li>
	<li>Precipitation Sensors</li>
</ul>
<h3>Protocols</h3>
<p>
	Many different protocols are supported for communicating with the
	various device types.
	Additional protocols can be added for any existing device type by
	programming a simple driver interface.
	These are some existing protocols:
</p>
<ul>
	<li>NTCIP class A, B and C (DMS)</li>
	<li>DMS-XML (DMS)</li>
	<li>MnDOT 4- and 5-bit (VDS, ramp meters, LCS, beacons, IRL)</li>
	<li>Wavetronix SS105 and SS125 (VDS)</li>
	<li>Canoga Traffic Sensing System (VDS)</li>
	<li>EIS G4 (VDS)</li>
	<li>Pelco D (pan/tilt/zoom)</li>
	<li>Infinova (pan/tilt/zoom)</li>
	<li>A/D "manchester" (pan/tilt/zoom)</li>
	<li>Vicon (pan/tilt/zoom)</li>
	<li>Msg Feed (external system DMS messages)</li>
	<li>Pelco Video Switcher</li>
	<li>Vicon Video Switcher</li>
	<li>Optical Scientific ORG-815 (precipitation)</li>
</ul>
<h3>Features</h3>
<p>
	IRIS also contains some higher-level traffic management features:
</p>
<ul>
	<li>Scheduled deployment of control devices</li>
	<li>Continuously updated density, speed and flow maps</li>
	<li>Travel time estimation for traveller information</li>
	<li>Incident management</li>
	<li>Variable speed advisories</li>
	<li>Coordinated ramp metering strategies</li>
</ul>
</div>

<h2 id="installation">Installation
<span class="show">[<span id="installation_show">show</span><span id="installation_hide">hide</span>]</span></h2>
<div id="installation_div">

<h3>Operating System</h3>
<p>
	Install <a href="http://fedoraproject.org">Fedora</a> onto the server
	computer.
	Other operating systems, such as Red Hat Enterprise Linux, can also be
	used, but the procedures may vary slightly.
	This machine should have a minimum of 2 GB of RAM and 200 GB hard drive
	storage space.
	The IRIS server does not have a GUI interface, so this computer can be
	set up headless in a server room.
</p>

<h3>Install Dependencies</h3>
<p>
	Install package dependencies, including
	<a href="http://openjdk.java.net">OpenJDK</a>,
	<a href="http://www.postgresql.org">PostgreSQL</a> and
	<a href="http://www.apache.org">Apache</a>.
	This can be performed with yum by running the following command (as
	root):
</p>
<pre class="code">yum install java-1.6.0-openjdk postgresql-server postgresql-jdbc httpd</pre>

<h3>Install IRIS</h3>
<p>
	<a href="http://iris.dot.state.mn.us/rpms/">Download</a> and install
	the IRIS package.
	This should be a file called <i>iris-xx.yy.zz-bb.aa.rpm</i>, with
	<i>xx</i> indicating the major version, <i>yy</i> minor, <i>zz</i>
	micro, and <i>bb</i> the build version.
	The system architecture, <i>aa</i>, will be either <i>i386</i> (32-bit)
	or <i>x86_64</i> (64-bit).
	It can be installed with the following command (as root):
</p>
<pre class="code">rpm -i iris-xx.yy.zz-bb.aa.rpm</pre>
<p>
	Next, you must initialize the IRIS server installation.
	This will create a SSL key pair for encrypted communication between the
	server and clients.
	You will be prompted for a Distinguished Name to use while
	creating a new self-signed certificate.
	Run the following command (as root):
</p>
<pre class="code">service iris init</pre>

<h3>Authentication Setup</h3>
<p>
	Setup an LDAP server for user authentication.
	If your organization already has an LDAP server, such as Active
	Directory, you should use that.
	This will allow operators to log into IRIS without requiring them to
	remember an additional user name and password.
	Otherwise, you can install and configure
	<a href="http://www.openldap.org">OpenLDAP</a>.
	For testing, IRIS also has an option to bypass all authentication
	(no LDAP server required).
</p>
<p>
	IRIS can also be configured to use multiple LDAP servers at once.
	When a user attempts to log in, each defined LDAP server will be
	checked, in order, until authentication succeeds.
	If authentication fails on all LDAP servers, then login will fail.
</p>
<p>
	Using a text editor, open the <i>/etc/iris/iris-server.properties</i>
	file.
	Locate the line which starts with <i>sonar.ldap.urls</i>.
	Change the value of this property to the URL(s) of your LDAP server(s).
	Multiple URLs must be separated by a space.
	The URL protocol is normally <i>ldap:</i>, but must be <i>ldaps:</i>
	for encrypted communication over SSL.
	For testing and debugging only, the <i>sonar.ldap.urls</i> property
	may be set to bypass_authentication.
	This allows anyone to connect to the IRIS server without a password.
	WARNING: Do not use this option on a production system.
</p>
<p>
	(Optional)
	If your LDAP server is configured to use SSL for authentication, then
	you must import the certificate into the IRIS keystore.
	Once you have obtained the SSL certificate, save it as <i>ldap.cert</i>.
	Now you can import it with the following command (as root):
</p>
<pre class="code">keytool -import -alias ldap-cert -keystore /etc/iris/iris-server.keystore -file ldap.cert</pre>

<h3>Database Setup</h3>
<p>
	The PostgreSQL database must be initialized before use.
	This can be accomplished with the following command (as root):
</p>
<pre class="code">service postgresql initdb</pre>
<p>
	Now, the database must be configured to allow the IRIS server to
	connect using a local TCP socket.
	Edit the <i>/var/lib/pgsql/data/pg_hba.conf</i> file so that it includes
	the following line:
</p>
<pre class="code">host    all         all         127.0.0.1/32          password</pre>
<p>
	NOTE: The "password" in the above line indicates an authentication
	method, not an actual password.
	This allows TCP connections from the local host to connect to the
	database using password authentication, as the IRIS server must.
</p>
<p>
	The PostgreSQL server can now be started:
</p>
<pre class="code">service postgresql start</pre>
<p>
	IRIS uses the PostgreSQL JDBC driver to access the database.
	This driver needs to be added to the java classpath.
	Run the following command (as root):
</p>
<pre class="code">ln -snf /usr/share/java/postgresql-jdbc.jar /usr/lib/jvm/jre/lib/ext/</pre>
<p>
	The <i>tms</i> user account is used by IRIS to connect to the PostgreSQL
	database.
	Run the following commands to configure this account:
</p>
<pre class="code">su postgres
createuser -S -D -R -W tms
exit</pre>
<p>
	You will be prompted for a password when running createuser.
	This same password must also be entered in the
	<i>/etc/iris/iris-server.properties</i> file.
	Open the file in a text editor and locate the line starting with
	#db.password.
	Remove the <i>#</i> and change the password to match.
</p>
<p>
	A database template must now be loaded with all the table definitions
	that IRIS needs.
	The following commands will create the <i>tms</i> database and
	populate it with the template:
</p>
<pre class="code">su postgres
createdb tms
psql tms -f /var/lib/iris/sql/tms-template.sql
exit</pre>
<p>
	A valid LDAP user must be added to the database to allow an initial
	administrator login.
	Run the following commands, replacing the bold values with the user's
	information:
</p>
<pre class="code">su tms
psql tms
INSERT INTO iris.i_user (name, full_name, dn, role, enabled)
	VALUES('<b>name</b>', '<b>full_name</b>', '<b>dn</b>',
	'administrator', true);
\q
exit
</pre>

<h3>Start Services</h3>
<p>
	The Apache web server and the IRIS server can now be started with the
	following commands:
</p>
<pre class="code">service httpd start
service iris start</pre>
<p>
	Check that everything started OK:
</p>
<pre class="code">tail -f -n 40 /var/log/iris/iris.stderr</pre>
<p>
	From a client computer with Java installed, point your web browser at
	http://YOUR_SERVER_NAME/iris-client/.
	From there, you should be able to launch the IRIS client Web Start
	application and log in.
</p>

<h3>Service Configuration</h3>
<p>
	Finally, PostgreSQL, Apache and IRIS should be configured to start when
	the operating system is rebooted.
	To do this, run following commands (as root):
</p>
<pre class="code">chkconfig postgresql on
chkconfig httpd on
chkconfig iris on</pre>

</div>

<h2 id="basic_setup">Basic Setup
<span class="show">[<span id="basic_setup_show">show</span><span id="basic_setup_hide">hide</span>]</span></h2>
<div id="basic_setup_div">

<h3>System Attributes</h3>
FIXME

<h3>Users and Roles</h3>
FIXME

<h3>Mapping</h3>
FIXME

<h3>Road Modelling</h3>
<p>
	For many of the features IRIS provides, it requires a model of the
	road network.
	This model consists of a set of roadway nodes, or <b>r_node</b>s, which
	describe all the points of interest on the road network.
	For instance, each entrance or exit ramp, detector station or
	intersection would be represented by an r_node.
</p>
<h4>Road Setup</h4>
<p>
	Before creating the r_nodes, some roads must be created.
	On the View menu, select System -&gt; Roads to bring up the Roads
	form.
	To create a new road, select the last (empty) cell in the Road column
	and type the name of the road.
	This name can be up to 20 characters in length, and uniquely identifies
	the road.
	It's a good idea to capitalize each word, and abbreviate any
	designators -- for example, "Main St".
</p>
<p>
	The next column is "Abbrev".
	Here, an abbreviation of up to 6 characters can be entered.
	This is used for labelling detectors and stations.
</p>
<p>
	The "Road Class" determines the presentation of the road on the map.
	For example, a road marked "Freeway" would be drawn thicker and more
	prominent than an "Expressway" or "Arterial".
</p>
<p>
	"Direction" and "Alt Dir" determine the primary and secondary compass
	directions of the road.
</p>
<h4>R_Node Setup</h4>
<p>
	The most important attribute of an r_node is the location.
	The location is described by the road, direction-of-travel, nearest
	cross-street, and coordinates.
</p>
<p>
	A <b>corridor</b> is an ordered list of all r_nodes associated with a
	road and direction-of-travel.
	The r_nodes in a corridor are put in order based on their coordinates.
</p>

<h3>Comm Links</h3>
<p>
	A "comm link" is a network connection to an external device or system.
	IRIS is capable of supporting hundreds of simultaneous comm links.
	Each comm link has a number of attributes, including URI and protocol.
	The URI includes a DNS host name or network IP address, and port number,
	using the standard "host:port" convention.
	The protocol determines what type of device or system is on the other
	end of the comm link.
</p>
<p>
	The main comm link interface is found on the <code>View ➔ Maintenance
	➔ Comm Links</code> menu item.
</p>
<table>
	<tr>
	    <th>Protocol</th>
	    <th>Description</th>
	</tr>
	<tr>
	    <td>NTCIP Class A</td>
	    <td>DMS control over UDP (no HDLC)</td>
	</tr>
	<tr>
	    <td>NTCIP Class B</td>
	    <td>DMS control over serial link (with HDLC)</td>
	</tr>
	<tr>
	    <td>NTCIP Class C</td>
	    <td>DMS control over TCP (no HDLC)</td>
	</tr>
	<tr>
	    <td>DMS XML</td>
	    <td>DMS control to external system</td>
	</tr>
	<tr>
	    <td>Msg feed</td>
	    <td>DMS control from external system</td>
	</tr>
	<tr>
	    <td>MnDOT 4</td>
	    <td>VDS + ramp metering (170 controllers, 4-bit addressing)</td>
	</tr>
	<tr>
	    <td>MnDOT 5</td>
	    <td>VDS + ramp metering (170 controllers, 5-bit addressing)</td>
	</tr>
	<tr>
	    <td>Canoga</td>
	    <td>VDS from GTT Canoga</td>
	</tr>
	<tr>
	    <td>SS105</td>
	    <td>VDS from Wavetronix SmartSensor (original)</td>
	</tr>
	<tr>
	    <td>SS125</td>
	    <td>VDS from Wavetronix SmartSensor HD</td>
	</tr>
	<tr>
	    <td>EIS G4</td>
	    <td>VDS from EIS G4 sensor</td>
	</tr>
	<tr>
	    <td>Org 815</td>
	    <td>RWIS from ORG 815 sensor</td>
	</tr>
	<tr>
	    <td>Pelco D</td>
	    <td>PTZ for Pelco cameras</td>
	</tr>
	<tr>
	    <td>Manchester</td>
	    <td>PTZ for AD cameras</td>
	</tr>
	<tr>
	    <td>Vicon</td>
	    <td>PTZ for Vicon cameras</td>
	</tr>
	<tr>
	    <td>Infinova</td>
	    <td>PTZ for Infinova cameras</td>
	</tr>
	<tr>
	    <td>Vicon Switcher</td>
	    <td>Video switching for Vicon</td>
	</tr>
	<tr>
	    <td>Pelco Switcher</td>
	    <td>Video switching for Pelco</td>
	</tr>
</table>

<h3>Fonts</h3>
<p>
	Before dynamic message signs can be used, the proper font must be
	configured.
	When selecting a font, a few parameters must be considered, such as
	pixel pitch, desired character height, and font weight.
	Pixel pitch can vary from 66 mm down to 20 mm or smaller.
	Typically, for freeway signs, characters should be between 350 and 400
	mm (about 14 or 15 inches) high.
	See the table below for character heights based on these common sizes.
</p>
<table>
	<tr>
	    <th rowspan='2'>Font Height</th>
	    <th colspan='4'>Pixel Pitch</th>
	</tr>
	<tr>
	    <th>20 mm</th>
	    <th>33 mm</th>
	    <th>50 mm</th>
	    <th>66 mm</th>
	</tr>
	<tr>
	    <th>7 px</th>
	    <td>120 mm (4.7 in)</td>
	    <td>198 mm (7.8 in)</td>
	    <td>300 mm (11.8 in)</td>
	    <td>396 mm (15.6 in)</td>
	</tr>
	<tr>
	    <th>10 px</th>
	    <td>180 mm (7.1 in)</td>
	    <td>297 mm (11.7 in)</td>
	    <td>450 mm (17.7 in)</td>
	    <td>594 mm (23.4 in)</td>
	</tr>
	<tr>
	    <th>12 px</th>
	    <td>220 mm (8.7 in)</td>
	    <td>363 mm (14.3 in)</td>
	    <td>550 mm (21.7 in)</td>
	    <td>726 mm (28.6 in)</td>
	</tr>
	<tr>
	    <th>14 px</th>
	    <td>260 mm (10.2 in)</td>
	    <td>429 mm (16.9 in)</td>
	    <td>650 mm (25.6 in)</td>
	    <td>858 mm (33.8 in)</td>
	</tr>
	<tr>
	    <th>16 px</th>
	    <td>300 mm (11.8 in)</td>
	    <td>495 mm (19.5 in)</td>
	    <td>750 mm (29.5 in)</td>
	    <td>990 mm (39.0 in)</td>
	</tr>
	<tr>
	    <th>18 px</th>
	    <td>340 mm (13.4 in)</td>
	    <td>561 mm (22.1 in)</td>
	    <td>850 mm (33.5 in)</td>
	    <td>1122 mm (44.2 in)</td>
	</tr>
	<tr>
	    <th>20 px</th>
	    <td>380 mm (15.0 in)</td>
	    <td>627 mm (24.7 in)</td>
	    <td>950 mm (37.4 in)</td>
	    <td>1254 mm (49.5 in)</td>
	</tr>
</table>
<p>
	In the past, DMS have been used with upper-case only fonts, but with
	smaller pixel pitch, it is possible to create legible fonts which
	also include lower-case characters.
	If a message containing lower-case characters is used with an upper-case
	only font, IRIS will replace those characters with their equivalent.
</p>
<p>
	Several sample fonts are included with IRIS as SQL scripts.
	They can be imported from the command line (bash) into an IRIS database
	with a command such as:
</p>
<pre class="code">psql tms -f /var/lib/iris/sql/fonts/F12_S2x1.sql</pre>
<p>
	The IRIS server will have to be restarted to have access to the imported
	font.
</p>

</div>

<h2 id="devices">Devices
<span class="show">[<span id="devices_show">show</span><span id="devices_hide">hide</span>]</span></h2>
<div id="devices_div">

<h3>Vehicle Detection</h3>
FIXME

<h3>Cameras and Video</h3>
FIXME

<h3>Dynamic Message Signs</h3>
FIXME

<h3>Lane-Use Control Signs</h3>
FIXME

<h3>Ramp Meters</h3>
FIXME

<h3>Warning Beacons</h3>
FIXME

<h3>Lane Marking</h3>
FIXME

</div>

<h2 id="features">Features
<span class="show">[<span id="features_show">show</span><span id="features_hide">hide</span>]</span></h2>
<div id="features_div">

<h3>Action Plans</h3>
FIXME

<h3>Date/Time Schedules</h3>
FIXME

<h3>Traffic Data Map</h3>
FIXME

<h3>Travel Time Estimation</h3>
FIXME

<h3>Incident Management</h3>
FIXME

<h3>Variable Speed Advisory</h3>
FIXME

<h3>Ramp Metering Strategies</h3>
FIXME

</div>

<h2 id="troubleshooting">Troubleshooting
<span class="show">[<span id="troubleshooting_show">show</span><span id="troubleshooting_hide">hide</span>]</span></h2>
<div id="troubleshooting_div">

<h3>Error Logs</h3>
FIXME

<h3>Realtime XML Output</h3>
FIXME

<h3>Database Event Tables</h3>
FIXME

<h3>Debug Trace Logs</h3>
FIXME

</div>

<h2 id="maintenance">Maintenance
<span class="show">[<span id="maintenance_show">show</span><span id="maintenance_hide">hide</span>]</span></h2>
<div id="maintenance_div">
<p>
	Once an IRIS system is set up, there are a few maintenance tasks which
	need to be done to ensure reliable operation.
</p>
<h3>Database Backups</h3>
FIXME

<h3>IRIS Upgrades</h3>
FIXME

<h3>System Software Updates</h3>
FIXME

<h3>Monitoring Logs</h3>
FIXME

</div>

<h2 id="development">Development
<span class="show">[<span id="development_show">show</span><span id="development_hide">hide</span>]</span></h2>
<div id="development_div">

<h3>Building</h3>
<p>
	Install <a href="http://fedoraproject.org">Fedora</a> onto the
	development system.
	Some additional development packages must be installed.
</p>
<pre class="code">yum install java-1.6.0-openjdk-devel ant-junit mercurial rpm-build gcc gstreamer-java</pre>
<p>
	Create links to gstreamer-java and jna jar files in extension directory.
</p>
<pre class="code">ln -snf /usr/share/java/jna.jar /usr/java/default/jre/lib/ext/
ln -snf /usr/share/java/gstreamer-java.jar /usr/java/default/jre/lib/ext/</pre>
<p>
	In a suitable development directory, clone the iris mercurial
	repository.
</p>
<pre class="code">hg clone http://iris.dot.state.mn.us/hg/index.cgi/iris</pre>
<p>
	Create lib/ directory in iris development repository.
</p>
<pre class="code">mkdir iris/lib/</pre>
<p>
	Download the <a href="http://www.oracle.com/technetwork/java/index-138643.html">JavaMail API</a> from Oracle.
	Unzip the JavaMail archive and locate the mail.jar file.
	Copy the mail.jar file to the lib/ directory in the iris repository.
</p>
<p>
	Copy iris-build.properties from etc/ to lib/.
	Edit lib/iris-build.properties file as necessary for your organization.
</p>
<p>
	Create the key for signing jar packages.
	This is required for Java Web Start, which is used by the IRIS client.
	The key should go into your default keystore (~/.keystore).
</p>
<pre class="code">keytool -genkeypair -alias signing-key</pre>
<p>
	Put the following lines into your ~/.ant.properties file.
</p>
<pre class="code">debug=off
sign.store=${user.home}/.keystore
sign.store.pass=password
sign.alias=signing-key
sign.alias.pass=signing-password
hgbase.url=http://iris.dot.state.mn.us/hg/index.cgi/
</pre>
<p>
	Now, the IRIS rpm file can be build with the following commands.
	(The current directory should be the root of the iris repository.
</p>
<pre class="code">ant rpm</pre>
<p>
	If there are no errors, the new rpm file should be in the
	build/rpm/RPMS/i386/ directory.
</p>

<h3>History</h3>
FIXME

<h3>Future Plans</h3>
FIXME

<h3>Contributing</h3>
FIXME

<h3>Coding Style</h3>
<p>
	The coding style for IRIS is focused on making code more readable.
	Readability is the most important factor for software maintenance,
	and it also helps new developers who are unfamiliar with the codebase.
</p>
<p>
	First and foremost, it is recommended that each method fit in one page
	of text (30 lines by 80 columns).
	Whenever possible, longer methods should be decomposed to abide by this
	recommendation.
	This allows a developer to quickly read and understand the method's
	logic.
	It is much easier to spot and correct bugs in shorter methods.
	There should be no blank lines within a method.
</p>
<p>
	With methods longer than one page, it can be beneficial to have a
	single exit point (return).
	But for shorter methods (always the goal), this is not so important,
	and can reduce readability.
	It doesn't make sense to add a local "ret" variable with a single
	return statement at the end when the whole method can be read at a
	glance.
</p>
<p>
	Each block indent should be 8 columns (using tabs instead of spaces).
	This makes the blocks more obvious, and is easier to read than the 4
	spaces commonly used in other Java projects.
	Always use an indented block with if, for, while, etc. statements.
	This makes it much easier to follow the control flow than when it is
	combined onto the same line as the statement.
	Don't put an opening curly brace on a line by itself unless the method
	declaration or loop statement spans multiple lines.
	For single line blocks (if, for, while), do not use curly braces.
</p>
<p>
	Each method should have a javadoc comment describing its purpose.
	All parameters and return values should be documented as well.
	Comments within a method should be used sparingly &mdash; never
	describe what the code is doing, but instead <b>why</b> it was written
	in a certain way.
	Code which is "commented out" should <b>never</b> be committed to a
	repository.
</p>
<p>
	Unary operators, such as ++ -- ! ~ should be adjacent to their operand
	with no space.
	Binary operators, such as + - / * % &amp; | &amp;&amp; || &gt; = &lt;
	&gt;&gt; == != &lt;&lt; &gt;&gt;&gt; &gt;= &lt;= ^ should be separated
	from their operands by a space.
</p>

</div>

</div>

</body>
</html>
