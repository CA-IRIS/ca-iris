<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<meta name="Author" content="Douglas Lau"/>
	<link href="iris_doc.css" rel="stylesheet" type="text/css"/>
	<title>Mn/DOT IRIS Installation and Configuration</title>
</head>

<body>
<div id="stamp">22 May 2009</div>
<h1>Mn/DOT IRIS Installation and Configuration</h1>
All commands must be run as the root user.
<ol>
	<li>
		Install <a href="http://fedoraproject.org">Fedora 10</a> onto
		the server machine.
	</li>
	<li>
		Install package dependencies.
<pre>
yum install java-1.6.0-openjdk postgresql-server postgresql-jdbc httpd
</pre>
	</li>
	<li>
		Setup an LDAP server for user authentication.
		If your organization already has an LDAP server, such as
		Active Directory, you should use that.
		Otherwise, you can install and configure OpenLDAP.
		You will need the host name (or IP address) and port that
		the IRIS server can use to authenticate users.
	</li>
	<li>
		Initialize the PostgreSQL database.
<pre>
service postgresql initdb
</pre>
	</li>
	<li>
		Allow password access for localhost PostgreSQL connections.
		Edit /var/lib/pgsql/data/pg_hba.conf to include this line:
<pre>
host    all         all         127.0.0.1/32          password
</pre>
	</li>
	<li>
		Configure PostgreSQL to start up automatically:
<pre>
chkconfig postgresql on
</pre>
	</li>
	<li>
		Start up PostgreSQL server:
<pre>
service postgresql start
</pre>
	</li>
	<li>
		Install the iris package with the rpm command.
<pre>
rpm -i iris-xx.yy.zz.rpm
</pre>
	</li>
	<li>
		Create the tms user within PostgreSQL.
		This user is used by the iris server for connecting to the
		PostgreSQL database.
<pre>
su postgres
createuser -S -D -R -W tms
</pre>
	</li>
	<li>
		Populate the tms database with template file.
<pre>
su tms
psql tms -f /var/lib/iris/sql/tms-template.sql
exit
</pre>
	</li>
	<li>
		Initialize the IRIS server installation.
		This creates a SSL key pair for encrypted communication.
		You will be prompted for a Distinguished Name to use while
		creating a new self-signed certificate.
<pre>
service iris init
</pre>
	</li>
	<li>
		(Optional) If your LDAP server is using SSL for authentication,
		obtain SSL certificate from LDAP administrator.
		Let's say it's called "ldap.cert".
<pre>
keytool -import -alias ldap-cert -keystore /etc/iris/iris-server.keystore -file ldap.cert
</pre>
	</li>
	<li>
		Edit /etc/iris/iris-server.properties and
		/etc/iris/iris-client.properties configuration files as
		necessary.
		All properties which have been commented out should be set
		accordingly.
	</li>
	<li>
		Add a valid LDAP user to the iris_user table within the
		tms database.  Let's assume the user name is "user", the
		distinguished name is "dn", and the full name is "full name".
<pre>
su tms
psql tms
INSERT INTO iris_user VALUES('user', 'dn', 'full name');
INSERT INTO iris_user_role VALUES('user', 'admin');
UPDATE role SET pattern = '.*', priv_r = 't', priv_w = 't', priv_c = 't', priv_d = 't' WHERE name = 'admin';
\q
exit
</pre>
	</li>
	<li>
		Start the iris service.
<pre>
service iris start
</pre>
	</li>
	<li>
		Check that everything started OK.
<pre>
tail -f -n 40 /var/log/iris/iris.stderr
</pre>
	</li>
	<li>
		Configure Apache web server to start up automatically:
<pre>
chkconfig httpd on
</pre>
	</li>
	<li>
		Start up Apache web server:
<pre>
service httpd start
</pre>
	</li>
	<li>
		From a client computer with Java installed, point you web
		browser at http://YOUR_SERVER_NAME/iris-client/.
		From there, you should be able to launch the IRIS client
		Web Start application.
	</li>
</ol>

</body>
</html>
